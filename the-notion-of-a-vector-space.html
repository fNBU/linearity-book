<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2&nbsp; The notion of a Vector Space – Linearity</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./bases.html" rel="next">
<link href="./what-is-linearity.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-72c93205fb41c15e2e398b4f9a505ee2.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-ca80a785959aa3106eea590d00a8e12e.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./what-is-linearity.html">Vector Spaces</a></li><li class="breadcrumb-item"><a href="./the-notion-of-a-vector-space.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The notion of a Vector Space</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Linearity</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/fnbu/linearity-book" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What are these notes?</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Vector Spaces</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./what-is-linearity.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">What is Linearity?</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./the-notion-of-a-vector-space.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The notion of a Vector Space</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Bases</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#definition" id="toc-definition" class="nav-link active" data-scroll-target="#definition">Definition</a></li>
  <li><a href="#scalars" id="toc-scalars" class="nav-link" data-scroll-target="#scalars">Scalars</a>
  <ul class="collapse">
  <li><a href="#fields" id="toc-fields" class="nav-link" data-scroll-target="#fields">Fields</a></li>
  </ul></li>
  <li><a href="#subspaces" id="toc-subspaces" class="nav-link" data-scroll-target="#subspaces">Subspaces</a>
  <ul class="collapse">
  <li><a href="#easier-subspaces" id="toc-easier-subspaces" class="nav-link" data-scroll-target="#easier-subspaces">Easier subspaces</a></li>
  </ul></li>
  <li><a href="#the-space-of-lists-of-length-n" id="toc-the-space-of-lists-of-length-n" class="nav-link" data-scroll-target="#the-space-of-lists-of-length-n">The space of lists of length <span class="math inline">\(n\)</span></a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/fnbu/linearity-book/blob/release/the-notion-of-a-vector-space.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./what-is-linearity.html">Vector Spaces</a></li><li class="breadcrumb-item"><a href="./the-notion-of-a-vector-space.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The notion of a Vector Space</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The notion of a Vector Space</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>If <span class="math inline">\(L : A \to B\)</span> is linear, what must be true about <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span>?</p>
<p>Let’s go back to the definition of a linear function. A function is linear if and only if it satisfies the following two properties:</p>
<p><span class="math display">\[
\begin{aligned}
\text{Property 1:} \quad &amp; L(a x )= a L(x) \\
\text{Property 2:} \quad &amp; L( x + y ) = L(x) + L(y).
\end{aligned}
\]</span></p>
<p>Let’s list a few things that must be true to arrive at these expressions:</p>
<ul>
<li>there are terms (like <span class="math inline">\(a\)</span> in property 1) that we can factor through <span class="math inline">\(L\)</span></li>
<li>there are terms (like <span class="math inline">\(x,y\)</span> in properties 1 and 2) that we cannot factor through <span class="math inline">\(L\)</span></li>
<li>there is some kind of addition on the <span class="math inline">\(x\)</span>s and <span class="math inline">\(y\)</span>s</li>
</ul>
<p>There are perhaps some more properties that would be nice, and that are true about all the domains and codomains of linear functions we have seen so far:</p>
<ul>
<li>the <span class="math inline">\(a\)</span>s (that we can pull through <span class="math inline">\(L\)</span>) have nice algebraic properties (<span class="math inline">\(+,-,\times, \text{division}\)</span>)</li>
<li>the <span class="math inline">\(+\)</span> operation on the <span class="math inline">\(x\)</span>s and <span class="math inline">\(y\)</span>s has some nice properties, too (existence of an identity, commutativity, etc)</li>
</ul>
<p>Eventually, mathematicians (who were working with linear functions intuitively) worked out the minimal set of facts that one needs about the domain and codomain of a linear function for everything to be coherent. Here it is</p>
<section id="definition" class="level2">
<h2 class="anchored" data-anchor-id="definition">Definition</h2>
<div id="def-vector-space" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.1</strong></span> A <em>vector space</em> is a set <span class="math inline">\(V\)</span> of <em>vectors</em> and a set <span class="math inline">\(F\)</span> of <em>scalars</em> that satisfy the following properties</p>
<ul>
<li>the set of scalars <span class="math inline">\(F\)</span> is a field (see <a href="#scalars">the next section</a> for more information on what we mean by field),</li>
<li>there is a function <span class="math inline">\(+ \colon V \times V \to V\)</span>, called <em>vector addition</em> that
<ul>
<li>is associative: <span class="math inline">\((X+Y) + Z = X + (Y + Z)\)</span>,</li>
<li>is commutative: <span class="math inline">\(X+Y = Y+X\)</span>,</li>
<li>has a <span class="math inline">\(0\)</span> (an additive identity) which means that <span class="math inline">\(0\)</span> satisfies <span class="math inline">\(0 + X = X\)</span> for all <span class="math inline">\(X \in V\)</span>,</li>
<li>has negatives (additive inverses) which means that for each <span class="math inline">\(X \in V\)</span> there is an element <span class="math inline">\(Y \in V\)</span> such that <span class="math inline">\(X + Y = 0\)</span> (one can prove that there is only one inverse of <span class="math inline">\(X\)</span>, and this is usually written <span class="math inline">\(-X\)</span>),</li>
</ul></li>
<li>there is a function <span class="math inline">\(\cdot \colon F \times V \to V\)</span>, called <em>scalar multiplication</em> such that
<ul>
<li>scalar multiplication associates with field multiplication (that is, <span class="math inline">\(\forall a , b \in F, X \in V\)</span> it’s true that <span class="math inline">\((ab)X = a (bX)\)</span>)</li>
<li>the multiplicative unit in <span class="math inline">\(F\)</span> is a unit for scalar multiplication (that is, <span class="math inline">\(\forall X \in V\)</span> we have <span class="math inline">\(1 X = X\)</span>)</li>
</ul></li>
<li>the following distributive laws hold:
<ul>
<li><span class="math inline">\((a+b) X = aX + bX , \quad \forall a, b\in F , X \in V\)</span></li>
<li><span class="math inline">\(a(X+Y) = aX + aY , \quad \forall a \in F ,  X,Y \in V\)</span></li>
</ul></li>
</ul>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Notation">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Notation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Above, we used the symbol <span class="math inline">\(\forall\)</span>. This is a symbol that mathematicians use that literally just means “for all”.</p>
<p>So, as an example <span class="math inline">\(x \in P_3 , \forall x \in P_2\)</span> is read as “for all x in the set of second degree polynomials, x is in the set of third degree polynomials”, which is just a wordy way of saying that all second degree polynomials are third degree polynomials.</p>
</div>
</div>
<p>Note that the notation <span class="math inline">\(+ \colon V \times V \to V\)</span> implies that <span class="math inline">\(V\)</span> is, in particular, closed under addition (since <span class="math inline">\(V\)</span> is the codomain of <span class="math inline">\(+\)</span>; addition cannot by definition return an element not in <span class="math inline">\(V\)</span>). Similarly we can conclude that <span class="math inline">\(V\)</span> must be closed under scalar multiplication.</p>
<p>All of the properties above hold (with the field of scalars <span class="math inline">\(F\)</span> set to <span class="math inline">\(\mathbb R\)</span>) for all the spaces we have used so far as the domain and codomain of a linear function. (You may want to check this for yourself quickly. Most of these facts obviously hold for polynomials, functions, points in <span class="math inline">\(\mathbb R^2\)</span>, and <span class="math inline">\(\mathbb R\)</span> itself. However, one must still check all of them before using a set as the domain or codomain of a linear function.)</p>
<p>Not all sets of mathematical objects satisfy these properties, though. An example is the set of points on the sphere. It turns out that there is no way (although the proof will have to wait for a future chapter) to turn that set into a vector space.</p>
<p>The way you should think about this definition is the following:</p>
<ul>
<li>we are <strong>allowed to use</strong> a set <span class="math inline">\(A\)</span> satisfying all of the properties in <a href="#def-vector-space" class="quarto-xref">Definition&nbsp;<span>2.1</span></a> as the domain or codomain of a linear function, but</li>
<li>a set <span class="math inline">\(A\)</span> that fails to satisfy any of the properties above <strong>can never be used</strong> as the domain or codomain of a linear function. If you tried to use it in this way, you would eventually run into statements that make no sense.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
</ul>
<p>An example of the kind of problem you can run into is the following: Let <span class="math inline">\(L:A \to B\)</span> be linear and suppose <span class="math inline">\(A\)</span> is a vector space as defined above but that <span class="math inline">\(B\)</span> fails to have an additive identity (that is, there is no zero vector in <span class="math inline">\(B\)</span>). We can compute</p>
<p><span class="math display">\[
L(0) = 0L(0) = 0 (?) = 0
\]</span> where the <span class="math inline">\(?\)</span> stands for whatever <span class="math inline">\(L(0)\)</span> maps to. Notice that in the end, it doesn’t matter because we conclude that <span class="math inline">\(L(0) = 0 \in B\)</span>. But this is nonsensical since we assumed there was no zero vector in <span class="math inline">\(B\)</span>.</p>
<div id="exr-r-is-a-vspace" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.1</strong></span> Check that <span class="math inline">\(\mathbb R\)</span> forms a vector space (the set of scalars is <span class="math inline">\(\mathbb R\)</span>).</p>
</div>
<div id="exr-r2-is-a-vspace" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.2</strong></span> Check that <span class="math inline">\(\mathbb R^2\)</span> is a vector space.</p>
</div>
</section>
<section id="scalars" class="level2">
<h2 class="anchored" data-anchor-id="scalars">Scalars</h2>
<p>In the above definition, we said that the scalars for a vector space must come from a field. What does this mean?</p>
<p>For the purposes of this text, our field will always be <span class="math inline">\(\mathbb R\)</span> or the field of complex numbers:</p>
<p><span class="math display">\[
\mathbb C := \{ a + b i \mid a,b \in \mathbb R \}
\]</span></p>
<p>where the symbol <span class="math inline">\(i\)</span> has the property that <span class="math inline">\(i^2 = -1\)</span> (and so we sometimes write it as <span class="math inline">\(\sqrt{-1}\)</span>). These two sets are the set of scalars for most vector spaces found in applications in the wild.</p>
<div id="exr-c-is-a-vspace-over-r" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.3</strong></span> Check that <span class="math inline">\(\mathbb C\)</span> can be thought of as a vector space with field of scalars <span class="math inline">\(\mathbb R\)</span>.</p>
</div>
<div id="def-polynomial-space" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.2</strong></span> Let <span class="math inline">\(P_n\)</span> be the set (which we mentioned informally in the previous chapter)</p>
<p><span class="math display">\[
\left\{ a_{n} x^n + a_{n-1} x^n + \cdots + a_1 x + a_0 \mid a_n , a_{n-1}, \ldots , a_1 , a_0 \in \mathbb R \right\}.
\]</span></p>
<p>This is called the <em>set of polynomials of degree <span class="math inline">\(n\)</span></em>.</p>
</div>
<div id="exr-pn-is-a-vspace" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.4</strong></span> Is <span class="math inline">\(P_n\)</span> a vector space for each <span class="math inline">\(n \in \mathbb N\)</span>?</p>
</div>
<p>From the previous two examples, you might notice that the definitions</p>
<p><span class="math display">\[
\mathbb C := \{ a + b i \mid a,b \in \mathbb R \}
\]</span></p>
<p>and</p>
<p><span class="math display">\[
P_n := \left\{ a_{n} x^n + a_{n-1} x^n + \cdots + a_1 x + a_0 \mid a_n , a_{n-1}, \ldots , a_1 , a_0 \in \mathbb R \right\}
\]</span></p>
<p>look similar, and they give you a hint about how to think of these as vector spaces; in both cases, they are constructed as the sum of things with coefficients in <span class="math inline">\(\mathbb R\)</span>. We will investigate this further in the next chapter.</p>
<section id="fields" class="level3">
<h3 class="anchored" data-anchor-id="fields">Fields</h3>
<p>In case you are interested, the full definition of a field can be found on <a href="https://en.wikipedia.org/wiki/Field_(mathematics)#Classic_definition">Wikipedia</a>. A field that you already know about, but that is not <span class="math inline">\(\mathbb R\)</span> or <span class="math inline">\(\mathbb C\)</span> is the field of rational numbers:</p>
<p><span class="math display">\[
\mathbb Q := \left\{ \left. \frac{a}{b}  \right| a,b \in \mathbb Z ,  b \ne 0  \right\}.
\]</span></p>
<p>There are esoteric examples of fields, and also algebraic structures stranger than fields. If this is interesting to you, you might try to take a course in Abstract Algebra. I learned this topic from Liz Stanhope and <span class="citation" data-cites="dummit-foote">Dummit and Foote (<a href="references.html#ref-dummit-foote" role="doc-biblioref">2004</a>)</span>.</p>
<p>In computing, real numbers (which do form a field) are often represented by 32 or 64 bit floating point numbers. It is perhaps interesting to know that floating point numbers (in any number of bits) (which are encountered <strong>often</strong> in the wild) do not form a field because addition of floating point numbers is not associative.</p>
</section>
</section>
<section id="subspaces" class="level2">
<h2 class="anchored" data-anchor-id="subspaces">Subspaces</h2>
<p>We have seen in this chapter that if you want to do something with a linear function, you better check first that its domain and codomain are vector spaces. It’s quite a lengthy process to verify all the properties in <a href="#def-vector-space" class="quarto-xref">Definition&nbsp;<span>2.1</span></a>, even if in many cases it is not difficult to verify each one individually. We are in need of machines that allow us to know that something is a vector space more easily. That is what this and the next section are about.</p>
<p>How do we know that a set <span class="math inline">\(W \subset V\)</span> is a vector space?</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Notation">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Notation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Above, we used the symbol <span class="math inline">\(\subset\)</span>. This just means “is a sub set of”, for example <span class="math inline">\(\mathbb Z \subset \mathbb Q\)</span> means “the set of integers is a subset of the set of rational numbers.”</p>
<p>When we say “A is a subset of B” or, equivalently write <span class="math inline">\(A \subset B\)</span>, we mean that everything in <span class="math inline">\(A\)</span> is also in <span class="math inline">\(B\)</span>.</p>
<p>We will sometimes write <span class="math inline">\(A \supset B\)</span> to mean that <span class="math inline">\(B\)</span> is a subset of <span class="math inline">\(A\)</span> or that “A has B as a subset.”</p>
</div>
</div>
<p>We’ve already seen some examples of this. For example, we know that differentiable functions form a vector space, and also the set <span class="math inline">\(P_n\)</span> forms a vector space. Since every polynomial is differentiable, it follows that <span class="math inline">\(P_n \subset \{ \text{differentiable functions}\}\)</span>. So <span class="math inline">\(P_n\)</span> is an example of a subset of a vector space that turns out to be a vector space itself.</p>
<p>Let’s introduce some terminology for this situation.</p>
<div id="def-vector-subspace" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2.3</strong></span> A subset <span class="math inline">\(W\)</span> of a vector space <span class="math inline">\(V\)</span> is called a (vector) <em>subspace</em> if <span class="math inline">\(W\)</span> is itself a vector space (with field of scalars <span class="math inline">\(F\)</span>, addition, multiplication, zero vector inherited from <span class="math inline">\(V\)</span>).</p>
</div>
<p>We have already seen an example of a subspace above. A nonexample is the set of points in the plane at distance 1 from the origin. This set doesn’t satisfy the closure assumptions of <a href="#def-vector-space" class="quarto-xref">Definition&nbsp;<span>2.1</span></a>.</p>
<p>It is a bit remarkable (although not difficult to prove) that we actually only need to check the closure assumptions. The following theorem encodes this fact.</p>
<div id="thm-vector-subspace" class="theorem">
<p><span class="theorem-title"><strong>Theorem 2.1</strong></span> A subset <span class="math inline">\(W\)</span> of a vector space <span class="math inline">\(V\)</span> is itself a vector space (with field of scalars <span class="math inline">\(F\)</span>, addition, multiplication, zero vector inherited from <span class="math inline">\(V\)</span>) iff the following two properties hold:</p>
<ol type="1">
<li><span class="math inline">\(W\)</span> is closed under scalar multiplication: <span class="math inline">\(aX \in W \quad \forall a \in F, X \in W\)</span></li>
<li><span class="math inline">\(W\)</span> is closed under vector addition: <span class="math inline">\(X+Y \in W \quad \forall X,Y \in W\)</span></li>
</ol>
</div>
<p>We won’t do the proof here (you can go to e.g. <span class="citation" data-cites="hefferon">Hefferon (<a href="references.html#ref-hefferon" role="doc-biblioref">2022</a>)</span> to see it), but we will sketch it.</p>
<p>Since the scalars, and the operations <span class="math inline">\(\cdot , +\)</span> are inherited from the ambient space <span class="math inline">\(V\)</span>, they are known to satisfy associativity, commutativity, existence of inverses and zeros, etc (because we had to prove those things when we showed that <span class="math inline">\(V\)</span> was a vector space). However, in <a href="#def-vector-space" class="quarto-xref">Definition&nbsp;<span>2.1</span></a>, we wrote <span class="math inline">\(+ \colon V \times V \to V\)</span>. That is, <span class="math inline">\(+\)</span> takes two vectors in <span class="math inline">\(V\)</span> and returns a vector in <span class="math inline">\(V\)</span>. Since <span class="math inline">\(W \subset V\)</span>, we know that we can use elements of <span class="math inline">\(W\)</span> as inputs to <span class="math inline">\(+\)</span>. That is, we know <span class="math inline">\(+ \colon W \times W \to V\)</span>, but we cannot know addition of vectors always lands in the subset <span class="math inline">\(W\)</span>. The first assumption above tells us this. Similarly for scalar multiplication.</p>
<p>For the proof in the opposite direction, notice that for <span class="math inline">\(W\)</span> to be a vector space we must have <span class="math inline">\(+ \colon W \times W \to W\)</span>. If addition is not closed, then <span class="math inline">\(+\)</span> has the wrong codomain, and <span class="math inline">\(W\)</span> isn’t a vector space. Similarly if <span class="math inline">\(W\)</span> is not closed under scalar multiplication.</p>
<section id="easier-subspaces" class="level3">
<h3 class="anchored" data-anchor-id="easier-subspaces">Easier subspaces</h3>
<p>Notice that we can use <a href="#thm-vector-subspace" class="quarto-xref">Theorem&nbsp;<span>2.1</span></a> to quite easily prove (assuming we know differentiable functions form a vector space) that <span class="math inline">\(P_n\)</span> is a vector space. We can also conclude easily that, for example,</p>
<p><span class="math display">\[
\{ a \sin x + b \cos x \mid a,b \in \mathbb R \}
\]</span></p>
<p>is a vector space.</p>
<div id="exr-arrows-subspace" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.5</strong></span> Is the set of arrows that are either fully horizontal or fully vertical a vector subspace of the vector space of arrows in 2D? Why?</p>
</div>
<div id="exr-monomials" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.6</strong></span> Consider the set of monomials</p>
<p><span class="math display">\[
\{ 1 , x , x^2 , x^3 , \ldots  \} .
\]</span></p>
<p>If I pick any two of these (say <span class="math inline">\(x^k\)</span> and <span class="math inline">\(x^l\)</span> with <span class="math inline">\(k \ne l\)</span>, eg <span class="math inline">\(x^{17}\)</span> and <span class="math inline">\(x^{2025}\)</span>) and form the set</p>
<p><span class="math display">\[
\{ a x^k + b x^l \mid a,b \in \mathbb R \} ,
\]</span></p>
<p>is this a vector subspace of the space of differentiable functions? Why?</p>
</div>
</section>
</section>
<section id="the-space-of-lists-of-length-n" class="level2">
<h2 class="anchored" data-anchor-id="the-space-of-lists-of-length-n">The space of lists of length <span class="math inline">\(n\)</span></h2>
<p>We have seen that the following are vector spaces: <span class="math inline">\(\mathbb R\)</span> over <span class="math inline">\(\mathbb R\)</span>, <span class="math inline">\(\mathbb R^2\)</span> over <span class="math inline">\(\mathbb R\)</span>, <span class="math inline">\(\mathbb C\)</span> over <span class="math inline">\(\mathbb C\)</span>.</p>
<p>There is a very powerful theorem that we can prove to generate many vector spaces that are of a similar form.</p>
<div id="thm-list-spaces" class="theorem">
<p><span class="theorem-title"><strong>Theorem 2.2</strong></span> Let <span class="math inline">\(F\)</span> be any field. Define the following set</p>
<p><span class="math display">\[
F^n := \{ (a_1 , a_2 , \cdots , a_n) \mid a_i \in F \}.
\]</span></p>
<p>This is the space of lists of length <span class="math inline">\(n\)</span>, with members from <span class="math inline">\(F\)</span>.</p>
<p>Let <span class="math inline">\(+ : F^n \times F^n \to F^n\)</span> be defined by</p>
<p><span class="math display">\[
(a_1 , a_2 , \cdots , a_n) + (b_1 , b_2 , \cdots , b_n) = (a_1 + b_1 , a_2 + b_2 , \cdots , a_n + b_n )
\]</span></p>
<p>and let <span class="math inline">\(\cdot : F \times F^n \to F^n\)</span> be defined by</p>
<p><span class="math display">\[
x (a_1 , a_2 , \cdots , a_n) = (xa_1 , xa_2 , \cdots , xa_n).
\]</span></p>
<p>Then <span class="math inline">\(F^n\)</span> with these two operations (and field of scalars <span class="math inline">\(F\)</span>) is a vector space.</p>
</div>
<p>The proof is a straightforward check of all the items in <a href="#def-vector-space" class="quarto-xref">Definition&nbsp;<span>2.1</span></a>.</p>
<p>Note that <span class="math inline">\(\mathbb R, \mathbb R^2 , \mathbb C\)</span> can be proved to be vector spaces using this theorem.</p>
<p>To develop your intuition for what this looks like, let’s do a multiplication in <span class="math inline">\(\mathbb C^4\)</span>:</p>
<p><span class="math display">\[
\begin{aligned}
&amp; i (1 , i , 1 + i , 2 - 3 i)\\
=&amp; (i , i^2 , i + i^2 , 2 i - 3 i^2) \\
=&amp; ( i , -1 , i -1 , 2i +3).
\end{aligned}
\]</span></p>
<p>Note that this theorem only works if <span class="math inline">\(F^n\)</span> is a vector space over <span class="math inline">\(F\)</span>. So, above, <span class="math inline">\(\mathbb C^4\)</span> is a vector space with scalars <span class="math inline">\(\mathbb C\)</span>.</p>
<div id="exr-cn-rn" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.7</strong></span> Is <span class="math inline">\(\mathbb R^n\)</span> a vector subspace of <span class="math inline">\(\mathbb C^n\)</span>? Think very carefully about <a href="#def-vector-subspace" class="quarto-xref">Definition&nbsp;<span>2.3</span></a>.</p>
</div>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-dummit-foote" class="csl-entry" role="listitem">
Dummit, David S., and Richard M. Foote. 2004. <em>Abstract Algebra</em>. Third Ed. John Wiley &amp; Sons, Inc., Hoboken, NJ.
</div>
<div id="ref-hefferon" class="csl-entry" role="listitem">
Hefferon, Jim. 2022. <em>Linear Algebra</em>. Fourth Ed. <a href="https://hefferon.net/linearalgebra/">https://hefferon.net/linearalgebra/</a>.
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>It is the case that some maps between spaces that are weaker than vector spaces have defining properties 1 and 2. The spaces are a generalization of vector spaces called <a href="https://en.wikipedia.org/wiki/Module_(mathematics)">modules</a> and the maps are called <a href="https://en.wikipedia.org/wiki/Module_homomorphism">module homomorphisms</a>. If you look at the definition of module homomorphism on wikipedia, you’ll see the same two equations we used to define linear functions.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./what-is-linearity.html" class="pagination-link" aria-label="What is Linearity?">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">What is Linearity?</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./bases.html" class="pagination-link" aria-label="Bases">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Bases</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/">
<a property="dct:title" rel="cc:attributionURL" href="https://fnbu.pw/linearity-book/">Linearity</a> by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://fnbu.pw/">Adam Layne</a> is licensed under <a href="https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""></a>
</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/fnbu/linearity-book/blob/release/the-notion-of-a-vector-space.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>The source code generating this book is provided under <a href="https://github.com/fNBU/linearity-book/blob/release/LICENSE">the MIT License</a>.</p>
</div>
  </div>
</footer>




</body></html>